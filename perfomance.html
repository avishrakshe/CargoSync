<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/static/maintenance.css">
    <title>Maintenance & Service Logs</title>
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

</head>

<body>

    <!-- Sidebar Navigation -->
    <div class="sidebar">
        <div class="logo">
            <i class="fa-solid fa-truck-fast"></i> FleetFlow
        </div>
        <div class="nav-links">
            <a href="Dashboard.html"><i class="fa-solid fa-chart-line"></i> Dashboard</a>
            <a href="registry.html"><i class="fa-solid fa-warehouse"></i> Vehicle Registry</a>
            <a href="dispatcher.html"><i class="fa-solid fa-truck-ramp-box"></i> Trip Dispatcher</a>
            <a href="maintenance.html" class="active"><i class="fa-solid fa-screwdriver-wrench"></i> Maintenance &
                Service Logs</a>
            <a href="expense.html"><i class="fa-solid fa-file-invoice-dollar"></i> Completed Trip, Expense & Fuel
                Logging</a>
            <a href="perfomance.html"><i class="fa-solid fa-user-shield"></i> Driver Performance & Safety Profiles</a>
            <a href="finance.html"><i class="fa-solid fa-chart-pie"></i> Operational Analytics & Financial Reports</a>
        </div>
    </div>

    <!-- Main Content Area -->
    <div class="main-content">

        <div class="header">
            <h2>Maintenance & Service Logs</h2>
            <p>Preventative and reactive health tracking for the fleet.</p>
        </div>

        <!-- Logic Link Alert -->
        <div class="logic-banner">
            <i class="fa-solid fa-circle-info"></i>
            <strong>Logic Link:</strong> Adding a vehicle to "In Progress" service automatically switches its status to
            <strong>"In Shop"</strong>, removing it from the Dispatcher selection pool.
        </div>

        <div class="dashboard-grid">

            <!-- LEFT COLUMN: Service Entry Form -->
            <div class="left-column">
                <div class="card">
                    <h3><i class="fa-solid fa-wrench"></i> Create Service Entry</h3>
                    <form method="post">

                        <!-- Vehicle Selection -->
                        <div class="form-group">
                            <label>Select Vehicle</label>
                            <select class="form-control" name="vehicle_id">
                                <option value="">-- Choose Vehicle --</option>
                                <option value="TRK-001">TRK-001 (Ford Cargo)</option>
                                <option value="VAN-042">VAN-042 (Mercedes Sprinter)</option>
                                <option value="TRK-012">TRK-012 (Volvo FH)</option>
                                <option value="BIKE-09">BIKE-09 (Courier Bike)</option>
                            </select>
                        </div>

                        <!-- Service Type -->
                        <div class="form-group">
                            <label>Service Type</label>
                            <select class="form-control" name="service_type">
                                <option value="Routine Maintenance">Routine Maintenance (Oil Change)</option>
                                <option value="Tyre Replacement">Tyre Replacement</option>
                                <option value="Brake Repair">Brake Repair</option>
                                <option value="Engine Diagnostics">Engine Diagnostics</option>
                                <option value="Accident Repair">Accident Repair</option>
                            </select>
                        </div>

                        <!-- Date -->
                        <div class="form-group">
                            <label>Service Date</label>
                            <input type="date" class="form-control" name="service_date">
                        </div>

                        <!-- Cost -->
                        <div class="form-group">
                            <label>Estimated Cost ($)</label>
                            <input type="number" class="form-control" name="estimated_cost" placeholder="0.00"
                                step="0.01">
                        </div>

                        <!-- Description -->
                        <div class="form-group">
                            <label>Notes / Issues Reported</label>
                            <textarea class="form-control" name="description"
                                placeholder="Describe issues or service details..."></textarea>
                        </div>

                        <button type="submit" class="btn btn-primary">
                            <i class="fa-solid fa-save"></i> Log Service
                        </button>
                    </form>
                </div>
            </div>

            <!-- RIGHT COLUMN: Service History Table -->
            <div class="right-column">
                <div class="card">
                    <h3><i class="fa-solid fa-list"></i> Service History & Status</h3>
                    <div class="table-responsive">
                        <table>
                            <thead>
                                <tr>
                                    <th>Log ID</th>
                                    <th>Vehicle</th>
                                    <th>Service Type</th>
                                    <th>Date</th>
                                    <th>Cost</th>
                                    <th>Vehicle Status</th>
                                    <th>Log Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for row in data %}
                                <tr>
                                    <td>LOG-{{ row.id }}</td>
                                    <td>{{ row.vehicle_id }}</td>
                                    <td>{{ row.service_type }}</td>
                                    <td>{{ row.service_date }}</td>
                                    <td>${{ row.estimated_cost }}</td>
                                    <td><span class="status-badge badge-inshop">In Shop</span></td>
                                    <td><span class="status-badge badge-inprogress">In Progress</span></td>
                                </tr>
                                {% else %}
                                <tr>
                                    <td colspan="7" style="text-align: center; padding: 20px;">No maintenance logged
                                        yet.</td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Quick Stats -->
                <div class="card">
                    <h3><i class="fa-solid fa-chart-simple"></i> Maintenance Overview</h3>
                    <div style="display: flex; justify-content: space-between; text-align: center;">
                        <div style="padding: 10px;">
                            <div style="font-size: 1.5rem; font-weight: bold; color: #c0392b;">3</div>
                            <div style="font-size: 0.8rem; color: var(--text-light);">Vehicles In Shop</div>
                        </div>
                        <div style="padding: 10px;">
                            <div style="font-size: 1.5rem; font-weight: bold; color: #f39c12;">5</div>
                            <div style="font-size: 0.8rem; color: var(--text-light);">Scheduled</div>
                        </div>
                        <div style="padding: 10px;">
                            <div style="font-size: 1.5rem; font-weight: bold; color: #27ae60;">42</div>
                            <div style="font-size: 0.8rem; color: var(--text-light);">Completed (Month)</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</body>

</html>